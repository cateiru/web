_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[13],{"/EDR":function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r("23aj")}])},"155x":function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r("epLR"),a=r("KwD7"),i=r("kiPq");function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}function l(e){var t=function(e){var t,r,n,l=Object(i.b)(),{id:s,disabled:d,readOnly:b,required:u,isRequired:j,isInvalid:O,isReadOnly:h,isDisabled:m,onFocus:f,onBlur:g}=e,p=o(e,["id","disabled","readOnly","required","isRequired","isInvalid","isReadOnly","isDisabled","onFocus","onBlur"]),v=[];null!=l&&l.hasFeedbackText&&null!=l&&l.isInvalid&&v.push(l.feedbackId);null!=l&&l.hasHelpText&&v.push(l.helpTextId);return c({},p,{"aria-describedby":v.join(" ")||void 0,id:null!=s?s:null==l?void 0:l.id,isDisabled:null!=(t=null!=d?d:m)?t:null==l?void 0:l.isDisabled,isReadOnly:null!=(r=null!=b?b:h)?r:null==l?void 0:l.isReadOnly,isRequired:null!=(n=null!=u?u:j)?n:null==l?void 0:l.isRequired,isInvalid:null!=O?O:null==l?void 0:l.isInvalid,onFocus:Object(a.a)(null==l?void 0:l.onFocus,f),onBlur:Object(a.a)(null==l?void 0:l.onBlur,g)})}(e),{isDisabled:r,isInvalid:l,isReadOnly:s,isRequired:d}=t;return c({},o(t,["isDisabled","isInvalid","isReadOnly","isRequired"]),{disabled:r,readOnly:s,required:d,"aria-invalid":Object(n.a)(l),"aria-required":Object(n.a)(d),"aria-readonly":Object(n.a)(s)})}},"23aj":function(e,t,r){"use strict";r.r(t);var n=r("nKUr"),a=r("q1tI"),i=r.n(a),c=r("xvhg"),o=r("MAJE"),l=r("5KJR"),s=r("tofy"),d=r("v7Hm"),b=r("sKyC"),u=r("U6LL"),j=r("BXwj"),O=r("pr4h"),h=r("zlS4");function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function f(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}var g=a.forwardRef(((e,t)=>{var{htmlWidth:r,htmlHeight:n,alt:i}=e,c=f(e,["htmlWidth","htmlHeight","alt"]);return a.createElement("img",m({width:r,height:n,ref:t,alt:i},c))})),p=Object(b.a)(((e,t)=>{var{fallbackSrc:r,fallback:n,src:i,align:c,fit:o,loading:l,ignoreFallback:s,crossOrigin:d}=e,b=f(e,["fallbackSrc","fallback","src","align","fit","loading","ignoreFallback","crossOrigin"]),O=null!=l||s,p=function(e){var{src:t,srcSet:r,onLoad:n,onError:i,crossOrigin:c,sizes:o,ignoreFallback:l}=e,[s,d]=Object(a.useState)("pending");Object(a.useEffect)((()=>{d(t?"loading":"pending")}),[t]);var b=Object(a.useRef)(),u=Object(a.useCallback)((()=>{if(t){j();var e=new Image;e.src=t,c&&(e.crossOrigin=c),r&&(e.srcset=r),o&&(e.sizes=o),e.onload=e=>{j(),d("loaded"),null==n||n(e)},e.onerror=e=>{j(),d("failed"),null==i||i(e)},b.current=e}}),[t,c,r,o,n,i]),j=()=>{b.current&&(b.current.onload=null,b.current.onerror=null,b.current=null)};return Object(h.a)((()=>{if(!l)return"loading"===s&&u(),()=>{j()}}),[s,u,l]),l?"loaded":s}(m({},e,{ignoreFallback:O})),v=m({ref:t,objectFit:o,objectPosition:c},O?b:Object(j.f)(b,["onError","onLoad"]));return"loaded"!==p?n||a.createElement(u.a.img,m({as:g,className:"chakra-image__placeholder",src:r},v)):a.createElement(u.a.img,m({as:g,src:i,crossOrigin:d,loading:l,className:"chakra-image"},v))}));O.a&&(p.displayName="Image");var v=r("uMdk"),x=r("RW2Z"),y=r("z7pX"),k=r("M/Vb"),w=r("0HfK"),R=r("epLR");r("ypkU"),Object.freeze(["base","sm","md","lg","xl","2xl"]);function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var I=Object(b.a)(((e,t)=>{var r,n,{ratio:i=4/3,children:c,className:o}=e,l=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,["ratio","children","className"]),s=a.Children.only(c),d=Object(R.b)("chakra-aspect-ratio",o);return a.createElement(u.a.div,C({ref:t,position:"relative",className:d,_before:{height:0,content:'""',display:"block",paddingBottom:(r=i,n=e=>1/e*100+"%",Object(O.c)(r)?r.map((e=>null===e?null:n(e))):Object(O.h)(r)?Object(j.e)(r).reduce(((e,t)=>(e[t]=n(r[t]),e)),{}):null!=r?n(r):null)},__css:{"& > *:not(style)":{overflow:"hidden",position:"absolute",top:"0",right:"0",bottom:"0",left:"0",display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"},"& > img, & > video":{objectFit:"cover"}}},l),s)}));O.a&&(I.displayName="AspectRatio");var N=r("7Ozu"),_=r.n(N),E={video:{facingMode:"environment",aspectRatio:{ideal:1}}};var W=r("T1Xd"),z=r("uK0Q"),L=function(){var e=Object(W.d)(z.h),t=Object(c.a)(e,2),r=t[0],a=t[1],o=Object(W.d)(z.g),s=Object(c.a)(o,2),d=s[0],b=s[1],u=Object(W.d)(z.k),j=Object(c.a)(u,2),O=j[0],h=j[1],m=Object(W.d)(z.f),f=Object(c.a)(m,2)[1],g=document.createElement("video"),p=i.a.useRef(null),v=null,x=0,y=null;i.a.useEffect((function(){v=p.current.getContext("2d"),h(!0),navigator.mediaDevices.getUserMedia(E).then((function(e){g.srcObject=e,y=e,g.setAttribute("playsinline","true"),g.play(),b(!1),x=requestAnimationFrame(k)})).catch((function(){h(!1)}))}),[]);var k=function e(){var t=p.current;try{if(g.readyState===g.HAVE_ENOUGH_DATA&&v){t.height=270,t.width=270,v.drawImage(g,0,0,t.width,t.height);var r=v.getImageData(0,0,t.width,t.height),n=_()(r.data,r.width,r.height,{inversionAttempts:"dontInvert"});n&&(f(n.data),function(e,t,r,n,a){a.beginPath(),a.moveTo(e.x,e.y),a.lineTo(t.x,t.y),a.lineTo(n.x,n.y),a.lineTo(r.x,r.y),a.closePath(),a.lineWidth=4,a.strokeStyle="rgba(245, 27, 60, 1)",a.stroke(),a.fillStyle="rgba(245, 27, 60, 0.5)",a.fill()}(n.location.topLeftCorner,n.location.topRightCorner,n.location.bottomLeftCorner,n.location.bottomRightCorner,v),setTimeout((function(){if(n.data&&""!==n.data)return a(!0),cancelAnimationFrame(x),void y.getTracks().forEach((function(e){return e.stop()}))}),500)),O||cancelAnimationFrame(x)}x=requestAnimationFrame(e)}catch(i){return cancelAnimationFrame(x),y.getTracks().forEach((function(e){return e.stop()})),void h(!0)}};return Object(n.jsx)(l.a,{children:Object(n.jsx)("canvas",{ref:p,hidden:r||d})})},D=r("KP9Q"),P=r("Teo5"),F=r("5jRf"),S=function(e){var t=e.text;return Object(n.jsxs)(s.a,{children:[Object(n.jsx)(d.a,{display:"flex",justifyContent:"center",alignItems:"center",margin:"0 1rem 0 0",children:Object(n.jsx)(x.d,{size:"2rem",color:P.f})}),Object(n.jsx)(o.a,{fontWeight:"bold",fontSize:"1.3rem",color:P.g,children:t})]})},T=function(e,t,r){return e&&t?Object(n.jsx)(k.a,{thickness:"4px",size:"xl",color:P.f,position:"absolute",zIndex:"1"}):!t||r?Object(n.jsx)("button",{onClick:function(){location.reload()},children:r?Object(n.jsx)(x.h,{size:"3rem",color:P.f}):Object(n.jsx)(x.j,{size:"3rem",color:P.f})}):void 0},q=function(){var e=Object(w.a)(),t=Object(W.d)(z.h),r=Object(c.a)(t,1)[0],a=Object(W.d)(z.g),l=Object(c.a)(a,1)[0],s=Object(W.d)(z.k),b=Object(c.a)(s,1)[0],u=Object(W.d)(z.f),j=Object(c.a)(u,1)[0],O=Object(W.d)(z.a),h=Object(c.a)(O,2),m=h[0],f=h[1],g=Object(W.d)(z.d),p=Object(c.a)(g,2),v=p[0],x=p[1];return i.a.useEffect((function(){f(!0)}),[]),i.a.useEffect((function(){if(!r&&b||f(!1),r){var t=new F.a(j);if(t.validateQrData()){var a=Object(y.a)(v),i=t.parseQrData(),c={label:"",code:j,date:(new Date).toLocaleString("ja-JP"),type:D.b.normal,campus:t.getLogCampus()};a.push(c),x(a),e({title:"\u8aad\u307f\u53d6\u308a\u5b8c\u4e86",description:Object(n.jsxs)(o.a,{wordBreak:"break-all",children:[i.buildingNumber,"\u53f7\u9928\xa0",i.floorNumber,"\u968e\xa0",i.roomNumber,"\u6559\u5ba4"]}),status:"info",duration:4e3,isClosable:!0})}else e({title:"QR\u30b3\u30fc\u30c9\u304c\u6b63\u3057\u304f\u3042\u308a\u307e\u305b\u3093",description:Object(n.jsx)(o.a,{wordBreak:"break-all",children:j}),status:"error",duration:4e3,isClosable:!0})}}),[r,b]),Object(n.jsx)(I,{max:"100px",ratio:1,children:Object(n.jsxs)(d.a,{width:"100px",border:"solid 2px #fff",backgroundColor:"#fff",borderRadius:"2rem",position:"relative",zIndex:"1",children:[T(l,b,r),Object(n.jsx)(d.a,{position:"absolute",zIndex:"0",borderRadius:"2rem",width:"100%",children:m?Object(n.jsx)(L,{}):null})]})})},B=function(){var e,t,r,a=Object(W.d)(z.g),i=Object(c.a)(a,1)[0],o=Object(W.d)(z.k),l=Object(c.a)(o,1)[0],s=Object(W.d)(z.h),b=Object(c.a)(s,1)[0];return Object(n.jsx)(d.a,{color:P.h,children:(e=i,t=b,r=l,r?e?"\u30ab\u30e1\u30e9\u5f85\u6a5f\u4e2d":t?"\u8aad\u307f\u53d6\u308a\u5b8c\u4e86":"\u8aad\u307f\u53d6\u308a\u5f85\u6a5f\u4e2d":"\u30ab\u30e1\u30e9\u505c\u6b62\u4e2d")})},A=function(){return Object(n.jsxs)(i.a.Fragment,{children:[Object(n.jsx)(l.a,{children:Object(n.jsxs)(d.a,{backgroundColor:P.e,margin:"2rem 0 0 0",padding:"1.5rem 1.5rem 0 1.5rem",borderRadius:"1.5rem",width:"20rem",children:[Object(n.jsx)(d.a,{color:"white",margin:"0 0 0 .2rem",children:Object(n.jsx)(S,{text:"QR\u30b3\u30fc\u30c9\u8aad\u307f\u53d6\u308a"})}),Object(n.jsx)(d.a,{margin:"1rem .2rem .2rem .2rem",children:Object(n.jsx)(q,{})}),Object(n.jsx)(l.a,{padding:".8rem 0 .8rem 0",children:Object(n.jsx)(B,{})})]})}),Object(n.jsx)(l.a,{margin:"1rem 0 1rem 0",children:Object(n.jsx)(o.a,{fontWeight:"bold",fontSize:".9rem",color:P.g,children:"\u307e\u305f\u306f"})})]})},H=r("VP/N"),K=r("3L07"),Q=r("ueHc"),M=r("kiPq"),J=r("155x"),U=r("4jWa"),X=r("CRla");function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var G=Object(b.a)(((e,t)=>{var r=Object(U.a)("Input",e),n=Object(X.b)(e),i=Object(J.a)(n),c=Object(R.b)("chakra-input",e.className);return a.createElement(u.a.input,V({},i,{__css:r.field,ref:t,className:c}))}));O.a&&(G.displayName="Input"),G.id="Input";var Z=function(){var e=Object(w.a)(),t=Object(H.a)(),r=t.isOpen,a=t.onOpen,i=t.onClose,s=Object(W.d)(z.b),d=Object(c.a)(s,2),b=d[0],u=d[1],j=Object(W.d)(z.d),O=Object(c.a)(j,2),h=O[0],m=O[1],f=function(){i(),u("")};return Object(n.jsxs)(l.a,{children:[Object(n.jsx)(K.a,{backgroundColor:P.b,borderRadius:"1.5rem",padding:"2rem 3rem 2rem 3rem",width:"20rem",onClick:a,children:Object(n.jsx)(o.a,{fontWeight:"medium",fontSize:"1.2rem",color:P.g,children:"\u5ea7\u5e2d\u30b3\u30fc\u30c9\u3092\u76f4\u63a5\u5165\u529b\u3059\u308b"})}),Object(n.jsxs)(Q.a,{isOpen:r,onClose:f,isCentered:!0,motionPreset:"slideInBottom",size:"sm",children:[Object(n.jsx)(Q.g,{}),Object(n.jsxs)(Q.d,{children:[Object(n.jsx)(Q.f,{color:P.g,margin:"1rem 0 .5rem 0",children:"\u5ea7\u5e2d\u30b3\u30fc\u30c9\u3092\u76f4\u63a5\u5165\u529b\u3059\u308b"}),Object(n.jsx)(Q.c,{size:"lg"}),Object(n.jsx)(Q.b,{pb:6,children:Object(n.jsx)(M.a,{children:Object(n.jsx)(G,{size:"lg",value:b,onChange:function(e){u(e.target.value)},placeholder:"\u5ea7\u5e2d\u30b3\u30fc\u30c9"})})}),Object(n.jsxs)(Q.e,{children:[Object(n.jsx)(K.a,{backgroundColor:P.e,mr:3,onClick:function(){var t="jp.ac.dendai/".concat(b),r=new F.a(t);if(r.validateQrData()){var a=Object(y.a)(h),c=r.parseQrData(),l={label:"",code:t,date:(new Date).toLocaleString("ja-JP"),type:D.b.normal,campus:r.getLogCampus()};a.push(l),m(a),i(),u(""),e({title:"\u8ffd\u52a0\u5b8c\u4e86",description:Object(n.jsxs)(o.a,{wordBreak:"break-all",children:[c.buildingNumber,"\u53f7\u9928\xa0",c.floorNumber,"\u968e\xa0",c.roomNumber,"\u6559\u5ba4"]}),status:"info",duration:4e3,isClosable:!0})}else e({title:"\u5ea7\u5e2d\u30b3\u30fc\u30c9\u304c\u6b63\u3057\u304f\u3042\u308a\u307e\u305b\u3093",status:"error",duration:4e3,isClosable:!0})},children:"\u4fdd\u5b58"}),Object(n.jsx)(K.a,{backgroundColor:P.c,onClick:f,children:"\u30ad\u30e3\u30f3\u30bb\u30eb"})]})]})]})]})},Y=r("9wln"),$=r("LHjV"),ee=function(e){var t=e.link;return Object(n.jsx)($.b,{buttonProps:{borderRadius:"2rem",leftIcon:Object(n.jsx)(x.i,{}),backgroundColor:P.c,color:P.a,width:"6.2rem"},link:t,children:Object(n.jsx)(o.a,{color:P.g,children:"\u8a2d\u5b9a"})})},te=function(e){var t=e.title,r=e.link;return Object(n.jsx)($.b,{buttonProps:{borderRadius:"1.5rem",width:"20rem",backgroundColor:P.c,padding:"1rem .5rem 1rem .5rem"},link:r,children:Object(n.jsx)(o.a,{color:P.g,children:t})})},re=function(){var e=Object(W.d)(z.d),t=Object(c.a)(e,1)[0];return Object(n.jsxs)(i.a.Fragment,{children:[Object(n.jsx)(l.a,{children:Object(n.jsxs)(s.a,{width:"20rem",justifyContent:"center",alignItems:"center",children:[Object(n.jsx)(d.a,{children:Object(n.jsx)(p,{src:"/static/images/logcation.svg",htmlWidth:"70%",htmlHeight:"70%",alt:"Logcation"})}),Object(n.jsx)(d.a,{children:Object(n.jsx)(ee,{link:"/setting"})})]})}),Object(n.jsx)(A,{}),Object(n.jsx)(Z,{}),Object(n.jsx)(l.a,{margin:"2rem 0 2rem 0",children:Object(n.jsx)(v.a,{colorScheme:P.d,borderWidth:"1px",width:"20rem"})}),Object(n.jsx)(l.a,{margin:"1rem 0 1rem 0",children:Object(n.jsx)(te,{title:"\u7740\u5e2d\u5c65\u6b74\u306e\u78ba\u8a8d",link:"/history"})}),Object(n.jsx)(l.a,{margin:"1rem 0 1rem 0",children:Object(n.jsx)(te,{title:"\u30c4\u30a4\u30fc\u30c8",link:Object(Y.e)(t)})})]})},ne=r("zRbM");t.default=function(){return Object(n.jsx)(ne.a,{children:Object(n.jsx)(d.a,{margin:"2.3rem 1.6rem 1rem 1.6rem",children:Object(n.jsx)(re,{})})})}},uMdk:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r("sKyC"),a=r("4jWa"),i=r("CRla"),c=r("U6LL"),o=r("epLR"),l=r("pr4h"),s=r("q1tI");function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function b(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}var u=Object(n.a)(((e,t)=>{var r=Object(a.b)("Divider",e),{borderLeftWidth:n,borderBottomWidth:l,borderTopWidth:u,borderRightWidth:j,borderWidth:O,borderStyle:h,borderColor:m}=r,f=b(r,["borderLeftWidth","borderBottomWidth","borderTopWidth","borderRightWidth","borderWidth","borderStyle","borderColor"]),g=Object(i.b)(e),{className:p,orientation:v="horizontal",__css:x}=g,y=b(g,["className","orientation","__css"]),k={vertical:{borderLeftWidth:n||j||O||"1px",height:"100%"},horizontal:{borderBottomWidth:l||u||O||"1px",width:"100%"}};return s.createElement(c.a.hr,d({ref:t,"aria-orientation":v},y,{__css:d({},f,{border:"0",borderColor:m,borderStyle:h},k[v],x),className:Object(o.b)("chakra-divider",p)}))}));l.a&&(u.displayName="Divider")}},[["/EDR",1,2,3,6,7,8,0,4,5]]]);