_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[12],{"/EDR":function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r("23aj")}])},"23aj":function(e,t,r){"use strict";r.r(t);var n=r("nKUr"),a=r("q1tI"),i=r.n(a),c=r("xvhg"),l=r("3L07"),o=r("MAJE"),s=r("5KJR"),d=r("tofy"),j=r("v7Hm"),b=r("sKyC"),u=r("U6LL"),O=r("BXwj"),h=r("pr4h"),f=r("zlS4");function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function g(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}var x=a.forwardRef(((e,t)=>{var{htmlWidth:r,htmlHeight:n,alt:i}=e,c=g(e,["htmlWidth","htmlHeight","alt"]);return a.createElement("img",m({width:r,height:n,ref:t,alt:i},c))})),p=Object(b.a)(((e,t)=>{var{fallbackSrc:r,fallback:n,src:i,align:c,fit:l,loading:o,ignoreFallback:s,crossOrigin:d}=e,j=g(e,["fallbackSrc","fallback","src","align","fit","loading","ignoreFallback","crossOrigin"]),b=null!=o||s,h=function(e){var{src:t,srcSet:r,onLoad:n,onError:i,crossOrigin:c,sizes:l,ignoreFallback:o}=e,[s,d]=Object(a.useState)("pending");Object(a.useEffect)((()=>{d(t?"loading":"pending")}),[t]);var j=Object(a.useRef)(),b=Object(a.useCallback)((()=>{if(t){u();var e=new Image;e.src=t,c&&(e.crossOrigin=c),r&&(e.srcset=r),l&&(e.sizes=l),e.onload=e=>{u(),d("loaded"),null==n||n(e)},e.onerror=e=>{u(),d("failed"),null==i||i(e)},j.current=e}}),[t,c,r,l,n,i]),u=()=>{j.current&&(j.current.onload=null,j.current.onerror=null,j.current=null)};return Object(f.a)((()=>{if(!o)return"loading"===s&&b(),()=>{u()}}),[s,b,o]),o?"loaded":s}(m({},e,{ignoreFallback:b})),p=m({ref:t,objectFit:l,objectPosition:c},b?j:Object(O.f)(j,["onError","onLoad"]));return"loaded"!==h?n||a.createElement(u.a.img,m({as:x,className:"chakra-image__placeholder",src:r},p)):a.createElement(u.a.img,m({as:x,src:i,crossOrigin:d,loading:o,className:"chakra-image"},p))}));h.a&&(p.displayName="Image");var v=r("uMdk"),y=r("RW2Z"),k=r("z7pX"),w=r("M/Vb"),C=r("0HfK"),R=r("epLR");r("ypkU"),Object.freeze(["base","sm","md","lg","xl","2xl"]);function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var E=Object(b.a)(((e,t)=>{var r,n,{ratio:i=4/3,children:c,className:l}=e,o=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,["ratio","children","className"]),s=a.Children.only(c),d=Object(R.b)("chakra-aspect-ratio",l);return a.createElement(u.a.div,I({ref:t,position:"relative",className:d,_before:{height:0,content:'""',display:"block",paddingBottom:(r=i,n=e=>1/e*100+"%",Object(h.c)(r)?r.map((e=>null===e?null:n(e))):Object(h.h)(r)?Object(O.e)(r).reduce(((e,t)=>(e[t]=n(r[t]),e)),{}):null!=r?n(r):null)},__css:{"& > *:not(style)":{overflow:"hidden",position:"absolute",top:"0",right:"0",bottom:"0",left:"0",display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"},"& > img, & > video":{objectFit:"cover"}}},o),s)}));h.a&&(E.displayName="AspectRatio");var N=r("7Ozu"),_=r.n(N),z={video:{facingMode:"environment",aspectRatio:{ideal:1}}};var F=r("T1Xd"),D=r("uK0Q"),q=function(){var e=Object(F.d)(D.g),t=Object(c.a)(e,2),r=t[0],a=t[1],l=Object(F.d)(D.f),o=Object(c.a)(l,2),d=o[0],j=o[1],b=Object(F.d)(D.j),u=Object(c.a)(b,2),O=u[0],h=u[1],f=Object(F.d)(D.e),m=Object(c.a)(f,2)[1],g=document.createElement("video"),x=i.a.useRef(null),p=null,v=0,y=null;i.a.useEffect((function(){p=x.current.getContext("2d"),h(!0),navigator.mediaDevices.getUserMedia(z).then((function(e){g.srcObject=e,y=e,g.setAttribute("playsinline","true"),g.play(),j(!1),v=requestAnimationFrame(k)})).catch((function(){h(!1)}))}),[]);var k=function e(){var t=x.current;try{if(g.readyState===g.HAVE_ENOUGH_DATA&&p){t.height=270,t.width=270,p.drawImage(g,0,0,t.width,t.height);var r=p.getImageData(0,0,t.width,t.height),n=_()(r.data,r.width,r.height,{inversionAttempts:"dontInvert"});n&&(m(n.data),function(e,t,r,n,a){a.beginPath(),a.moveTo(e.x,e.y),a.lineTo(t.x,t.y),a.lineTo(n.x,n.y),a.lineTo(r.x,r.y),a.closePath(),a.lineWidth=4,a.strokeStyle="rgba(245, 27, 60, 1)",a.stroke(),a.fillStyle="rgba(245, 27, 60, 0.5)",a.fill()}(n.location.topLeftCorner,n.location.topRightCorner,n.location.bottomLeftCorner,n.location.bottomRightCorner,p),setTimeout((function(){if(n.data&&""!==n.data)return a(!0),cancelAnimationFrame(v),void y.getTracks().forEach((function(e){return e.stop()}))}),500)),O||cancelAnimationFrame(v)}v=requestAnimationFrame(e)}catch(i){return cancelAnimationFrame(v),y.getTracks().forEach((function(e){return e.stop()})),void h(!0)}};return Object(n.jsx)(s.a,{children:Object(n.jsx)("canvas",{ref:x,hidden:r||d})})},P=r("KP9Q"),T=r("Teo5"),S=r("5jRf"),L=function(e){var t=e.text;return Object(n.jsxs)(d.a,{children:[Object(n.jsx)(j.a,{display:"flex",justifyContent:"center",alignItems:"center",margin:"0 1rem 0 0",children:Object(n.jsx)(y.c,{size:"2rem",color:T.f})}),Object(n.jsx)(o.a,{fontWeight:"bold",fontSize:"1.3rem",color:T.g,children:t})]})},A=function(e,t,r){return e&&t?Object(n.jsx)(w.a,{thickness:"4px",size:"xl",color:T.f,position:"absolute",zIndex:"1"}):!t||r?Object(n.jsx)("button",{onClick:function(){location.reload()},children:r?Object(n.jsx)(y.e,{size:"3rem",color:T.f}):Object(n.jsx)(y.g,{size:"3rem",color:T.f})}):void 0},B=function(){var e=Object(C.a)(),t=Object(F.d)(D.g),r=Object(c.a)(t,1)[0],a=Object(F.d)(D.f),l=Object(c.a)(a,1)[0],s=Object(F.d)(D.j),d=Object(c.a)(s,1)[0],b=Object(F.d)(D.e),u=Object(c.a)(b,1)[0],O=Object(F.d)(D.a),h=Object(c.a)(O,2),f=h[0],m=h[1],g=Object(F.d)(D.d),x=Object(c.a)(g,2),p=x[0],v=x[1];return i.a.useEffect((function(){m(!0)}),[]),i.a.useEffect((function(){if(console.log(d),!r&&d||m(!1),r){var t=new S.a(u);if(t.validateQrData()){var a=Object(k.a)(p),i=t.parseQrData(),c={label:"",code:u,date:(new Date).toLocaleString("ja-JP"),type:P.b.normal,campus:t.getLogCampus()};a.push(c),v(a),e({title:"\u8aad\u307f\u53d6\u308a\u5b8c\u4e86",description:Object(n.jsxs)(o.a,{wordBreak:"break-all",children:[i.buildingNumber,"\u53f7\u9928\xa0",i.floorNumber,"\u968e\xa0",i.roomNumber,"\u6559\u5ba4"]}),status:"info",duration:4e3,isClosable:!0})}else e({title:"QR\u30b3\u30fc\u30c9\u304c\u6b63\u3057\u304f\u3042\u308a\u307e\u305b\u3093",description:Object(n.jsx)(o.a,{wordBreak:"break-all",children:u}),status:"error",duration:4e3,isClosable:!0})}}),[r,d]),Object(n.jsx)(E,{max:"100px",ratio:1,children:Object(n.jsxs)(j.a,{width:"100px",border:"solid 2px #fff",backgroundColor:"#fff",borderRadius:"2rem",position:"relative",zIndex:"1",children:[A(l,d,r),Object(n.jsx)(j.a,{position:"absolute",zIndex:"0",borderRadius:"2rem",width:"100%",children:f?Object(n.jsx)(q,{}):null})]})})},W=function(){var e,t,r,a=Object(F.d)(D.f),i=Object(c.a)(a,1)[0],l=Object(F.d)(D.j),o=Object(c.a)(l,1)[0],s=Object(F.d)(D.g),d=Object(c.a)(s,1)[0];return Object(n.jsx)(j.a,{color:T.h,children:(e=i,t=d,r=o,r?e?"\u30ab\u30e1\u30e9\u5f85\u6a5f\u4e2d":t?"\u8aad\u307f\u53d6\u308a\u5b8c\u4e86":"\u8aad\u307f\u53d6\u308a\u5f85\u6a5f\u4e2d":"\u30ab\u30e1\u30e9\u505c\u6b62\u4e2d")})},H=function(){return Object(n.jsxs)(i.a.Fragment,{children:[Object(n.jsx)(s.a,{children:Object(n.jsxs)(j.a,{backgroundColor:T.e,margin:"2rem 0 0 0",padding:"1.5rem 1.5rem 0 1.5rem",borderRadius:"1.5rem",width:"20rem",children:[Object(n.jsx)(j.a,{color:"white",margin:"0 0 0 .2rem",children:Object(n.jsx)(L,{text:"QR\u30b3\u30fc\u30c9\u8aad\u307f\u53d6\u308a"})}),Object(n.jsx)(j.a,{margin:"1rem .2rem .2rem .2rem",children:Object(n.jsx)(B,{})}),Object(n.jsx)(s.a,{padding:".8rem 0 .8rem 0",children:Object(n.jsx)(W,{})})]})}),Object(n.jsx)(s.a,{margin:"1rem 0 1rem 0",children:Object(n.jsx)(o.a,{fontWeight:"bold",fontSize:".9rem",color:T.g,children:"\u307e\u305f\u306f"})})]})},Q=r("YFqc"),K=r.n(Q),J=r("VP/N"),M=r("ueHc"),U=r("kiPq"),X=r("KwD7");function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function G(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}function Y(e){var t=function(e){var t,r,n,a=Object(U.b)(),{id:i,disabled:c,readOnly:l,required:o,isRequired:s,isInvalid:d,isReadOnly:j,isDisabled:b,onFocus:u,onBlur:O}=e,h=G(e,["id","disabled","readOnly","required","isRequired","isInvalid","isReadOnly","isDisabled","onFocus","onBlur"]),f=[];null!=a&&a.hasFeedbackText&&null!=a&&a.isInvalid&&f.push(a.feedbackId);null!=a&&a.hasHelpText&&f.push(a.helpTextId);return V({},h,{"aria-describedby":f.join(" ")||void 0,id:null!=i?i:null==a?void 0:a.id,isDisabled:null!=(t=null!=c?c:b)?t:null==a?void 0:a.isDisabled,isReadOnly:null!=(r=null!=l?l:j)?r:null==a?void 0:a.isReadOnly,isRequired:null!=(n=null!=o?o:s)?n:null==a?void 0:a.isRequired,isInvalid:null!=d?d:null==a?void 0:a.isInvalid,onFocus:Object(X.a)(null==a?void 0:a.onFocus,u),onBlur:Object(X.a)(null==a?void 0:a.onBlur,O)})}(e),{isDisabled:r,isInvalid:n,isReadOnly:a,isRequired:i}=t;return V({},G(t,["isDisabled","isInvalid","isReadOnly","isRequired"]),{disabled:r,readOnly:a,required:i,"aria-invalid":Object(R.a)(n),"aria-required":Object(R.a)(i),"aria-readonly":Object(R.a)(a)})}var Z=r("4jWa"),$=r("CRla");function ee(){return(ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var te=Object(b.a)(((e,t)=>{var r=Object(Z.a)("Input",e),n=Y(Object($.b)(e)),i=Object(R.b)("chakra-input",e.className);return a.createElement(u.a.input,ee({},n,{__css:r.field,ref:t,className:i}))}));h.a&&(te.displayName="Input"),te.id="Input";var re=function(){var e=Object(C.a)(),t=Object(J.a)(),r=t.isOpen,a=t.onOpen,i=t.onClose,d=Object(F.d)(D.b),j=Object(c.a)(d,2),b=j[0],u=j[1],O=Object(F.d)(D.d),h=Object(c.a)(O,2),f=h[0],m=h[1],g=function(){i(),u("")};return Object(n.jsxs)(s.a,{children:[Object(n.jsx)(l.a,{backgroundColor:T.b,borderRadius:"1.5rem",padding:"2rem 3rem 2rem 3rem",width:"20rem",onClick:a,children:Object(n.jsx)(o.a,{fontWeight:"medium",fontSize:"1.2rem",color:T.g,children:"\u5ea7\u5e2d\u30b3\u30fc\u30c9\u3092\u76f4\u63a5\u5165\u529b\u3059\u308b"})}),Object(n.jsxs)(M.a,{isOpen:r,onClose:g,isCentered:!0,motionPreset:"slideInBottom",size:"sm",children:[Object(n.jsx)(M.g,{}),Object(n.jsxs)(M.d,{children:[Object(n.jsx)(M.f,{color:T.g,margin:"1rem 0 .5rem 0",children:"\u5ea7\u5e2d\u30b3\u30fc\u30c9\u3092\u76f4\u63a5\u5165\u529b\u3059\u308b"}),Object(n.jsx)(M.c,{size:"lg"}),Object(n.jsx)(M.b,{pb:6,children:Object(n.jsx)(U.a,{children:Object(n.jsx)(te,{size:"lg",value:b,onChange:function(e){u(e.target.value)},placeholder:"\u5ea7\u5e2d\u30b3\u30fc\u30c9"})})}),Object(n.jsxs)(M.e,{children:[Object(n.jsx)(l.a,{backgroundColor:T.e,mr:3,onClick:function(){var t="jp.ac.dendai/".concat(b),r=new S.a(t);if(r.validateQrData()){var a=Object(k.a)(f),c=r.parseQrData(),l={label:"",code:t,date:(new Date).toLocaleString("ja-JP"),type:P.b.normal,campus:r.getLogCampus()};a.push(l),m(a),i(),u(""),e({title:"\u8ffd\u52a0\u5b8c\u4e86",description:Object(n.jsxs)(o.a,{wordBreak:"break-all",children:[c.buildingNumber,"\u53f7\u9928\xa0",c.floorNumber,"\u968e\xa0",c.roomNumber,"\u6559\u5ba4"]}),status:"info",duration:4e3,isClosable:!0})}else e({title:"\u5ea7\u5e2d\u30b3\u30fc\u30c9\u304c\u6b63\u3057\u304f\u3042\u308a\u307e\u305b\u3093",status:"error",duration:4e3,isClosable:!0})},children:"\u4fdd\u5b58"}),Object(n.jsx)(l.a,{backgroundColor:T.c,onClick:g,children:"\u30ad\u30e3\u30f3\u30bb\u30eb"})]})]})]})]})},ne=r("9wln"),ae=function(e){var t=e.link;return Object(n.jsx)(K.a,{href:t,children:Object(n.jsx)(l.a,{borderRadius:"2rem",leftIcon:Object(n.jsx)(y.f,{}),backgroundColor:T.c,color:T.a,width:"6.2rem",children:Object(n.jsx)(o.a,{color:T.g,children:"\u8a2d\u5b9a"})})})},ie=function(e){var t=e.title,r=e.link,a=Object(F.d)(D.j),i=Object(c.a)(a,2)[1],s=Object(F.d)(D.g),d=Object(c.a)(s,2)[1];return Object(n.jsx)(K.a,{href:r,children:Object(n.jsx)(l.a,{borderRadius:"1.5rem",width:"20rem",backgroundColor:T.c,padding:"1rem .5rem 1rem .5rem",onClick:function(){i(!1),d(!1)},children:Object(n.jsx)(o.a,{color:T.g,children:t})})})},ce=function(){var e=Object(F.d)(D.d),t=Object(c.a)(e,1)[0];return Object(n.jsxs)(i.a.Fragment,{children:[Object(n.jsx)(s.a,{children:Object(n.jsxs)(d.a,{width:"20rem",children:[Object(n.jsx)(j.a,{display:"flex",justifyContent:"right",children:Object(n.jsx)(p,{src:"/static/images/logcation.svg",htmlWidth:"60%",htmlHeight:"60%",alt:"Logcation"})}),Object(n.jsx)(j.a,{display:"flex",justifyContent:"left",children:Object(n.jsx)(ae,{link:""})})]})}),Object(n.jsx)(H,{}),Object(n.jsx)(re,{}),Object(n.jsx)(s.a,{margin:"2rem 0 2rem 0",children:Object(n.jsx)(v.a,{colorScheme:T.d,borderWidth:"1px",width:"20rem"})}),Object(n.jsx)(s.a,{margin:"1rem 0 1rem 0",children:Object(n.jsx)(ie,{title:"\u7740\u5e2d\u5c65\u6b74\u306e\u78ba\u8a8d",link:"/history"})}),Object(n.jsx)(s.a,{margin:"1rem 0 1rem 0",children:Object(n.jsx)(ie,{title:"\u30c4\u30a4\u30fc\u30c8",link:Object(ne.d)(t)})})]})};t.default=function(){return Object(n.jsx)(j.a,{margin:"2.3rem 1.6rem 1rem 1.6rem",children:Object(n.jsx)(ce,{})})}}},[["/EDR",1,2,3,5,7,0,4,6]]]);